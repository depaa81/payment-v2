<!DOCTYPE html>
<html lang="id">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>Pembayaran E-Wallet</title>
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  transition: background-color 0.3s, color 0.3s;
Â  Â  }
Â  Â  body.dark {
Â  Â  Â  background-color: #1e293b;
Â  Â  Â  color: #cbd5e1;
Â  Â  }
Â  Â  .dark input,
Â  Â  .dark select,
Â  Â  .dark button {
Â  Â  Â  background-color: #334155;
Â  Â  Â  color: #e2e8f0;
Â  Â  Â  border-color: #475569;
Â  Â  }
Â  Â  .dark input::placeholder,
Â  Â  .dark select::placeholder {
Â  Â  Â  color: #94a3b8;
Â  Â  }
Â  </style>
</head>
<body class="bg-gradient-to-br from-indigo-500 via-blue-600 to-purple-600 min-h-screen flex items-center justify-center p-4 sm:p-6">

Â  <div class="w-full max-w-xl p-6 sm:p-8 bg-white/90 dark:bg-slate-800 rounded-2xl shadow-2xl">
Â  Â  <div class="flex flex-col sm:flex-row justify-between items-center mb-6 gap-3">
Â  Â  Â  <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 dark:text-slate-200">Pembayaran E-Wallet</h1>
Â  Â  Â  <button id="toggleDark"
Â  Â  Â  Â  class="bg-indigo-600 dark:bg-indigo-400 text-white dark:text-gray-900 px-4 py-2 rounded-lg shadow hover:bg-indigo-700 dark:hover:bg-indigo-300 transition">
Â  Â  Â  Â  Dark Mode
Â  Â  Â  </button>
Â  Â  </div>

Â  Â  <form id="paymentForm" class="space-y-5">
Â  Â  Â  <div>
Â  Â  Â  Â  <label class="block text-sm font-semibold text-gray-700 dark:text-slate-300">Nama</label>
Â  Â  Â  Â  <input type="text" id="nama" required placeholder="Nama lengkap"
Â  Â  Â  Â  Â  Â  Â  Â class="w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 shadow-sm" />
Â  Â  Â  </div>

Â  Â  Â  <div>
Â  Â  Â  Â  <label class="block text-sm font-semibold text-gray-700 dark:text-slate-300">E-Wallet</label>
Â  Â  Â  Â  <select id="ewallet" required
Â  Â  Â  Â  Â  Â  Â  Â  class="w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 shadow-sm">
Â  Â  Â  Â  Â  <option value="">-- Pilih --</option>
Â  Â  Â  Â  Â  <option value="GoPay - 0812-3456-7890">GoPay - 0812-3456-7890</option>
Â  Â  Â  Â  Â  <option value="OVO - 0821-9876-5432">OVO - 0821-9876-5432</option>
Â  Â  Â  Â  Â  <option value="DANA - 0851-2233-1122">DANA - 0851-2233-1122</option>
Â  Â  Â  Â  </select>
Â  Â  Â  </div>

Â  Â  Â  <div>
Â  Â  Â  Â  <label class="block text-sm font-semibold text-gray-700 dark:text-slate-300">Nominal (Rp)</label>
Â  Â  Â  Â  <select id="presetAmount"
Â  Â  Â  Â  Â  Â  Â  Â  class="w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 shadow-sm mb-2">
Â  Â  Â  Â  Â  <option value="">-- Pilih Nominal --</option>
Â  Â  Â  Â  Â  <option value="10000">10.000</option>
Â  Â  Â  Â  Â  <option value="25000">25.000</option>
Â  Â  Â  Â  Â  <option value="50000">50.000</option>
Â  Â  Â  Â  Â  <option value="100000">100.000</option>
Â  Â  Â  Â  Â  <option value="custom">Nominal lain...</option>
Â  Â  Â  Â  </select>
Â  Â  Â  Â  <input type="number" id="customAmount" min="1000" placeholder="Masukkan nominal sendiri"
Â  Â  Â  Â  Â  Â  Â  Â class="w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 shadow-sm"
Â  Â  Â  Â  Â  Â  Â  Â disabled />
Â  Â  Â  </div>

Â  Â  Â  <div>
Â  Â  Â  Â  <label class="block text-sm font-semibold text-gray-700 dark:text-slate-300">Upload Bukti Transfer</label>
Â  Â  Â  Â  <input type="file" id="bukti" accept="image/*" required
Â  Â  Â  Â  Â  Â  Â  Â class="w-full p-2 border border-gray-300 rounded-lg bg-white dark:bg-slate-700 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-indigo-600 file:text-white shadow"/>
Â  Â  Â  </div>

Â  Â  Â  <button type="submit"
Â  Â  Â  Â  Â  Â  Â  class="w-full bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-400 dark:hover:bg-indigo-500 text-white font-semibold py-3 rounded-lg transition shadow-lg">
Â  Â  Â  Â  Kirim ke Telegram
Â  Â  Â  </button>
Â  Â  </form>
Â  Â Â 
Â  Â  <a href="admin.html"
Â  Â  Â  onclick="localStorage.setItem('lastVisited', new Date().toISOString());"
Â  Â  Â  class="block mt-4 text-center bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg shadow transition">
Â  Â  Â  Lihat Riwayat Pembayaran
Â  Â  </a>

Â  Â  <p id="status" class="text-center mt-4 text-sm text-green-600 hidden">âœ… Data berhasil dikirim ke Telegram.</p>
Â  </div>
Â Â 

Â  <script>
Â  Â  const toggleBtn = document.getElementById("toggleDark");
Â  Â  const bodyEl = document.body;

Â  Â  if(localStorage.getItem("darkMode") === "enabled") {
Â  Â  Â  bodyEl.classList.add("dark");
Â  Â  Â  toggleBtn.textContent = "Light Mode";
Â  Â  }

Â  Â  toggleBtn.addEventListener("click", () => {
Â  Â  Â  bodyEl.classList.toggle("dark");
Â  Â  Â  if(bodyEl.classList.contains("dark")) {
Â  Â  Â  Â  localStorage.setItem("darkMode", "enabled");
Â  Â  Â  Â  toggleBtn.textContent = "Light Mode";
Â  Â  Â  } else {
Â  Â  Â  Â  localStorage.setItem("darkMode", "disabled");
Â  Â  Â  Â  toggleBtn.textContent = "Dark Mode";
Â  Â  Â  }
Â  Â  });

Â  Â  // Nominal preset & custom input logic
Â  Â  const presetAmount = document.getElementById("presetAmount");
Â  Â  const customAmount = document.getElementById("customAmount");

Â  Â  presetAmount.addEventListener("change", () => {
Â  Â  Â  if (presetAmount.value === "custom") {
Â  Â  Â  Â  customAmount.disabled = false;
Â  Â  Â  Â  customAmount.focus();
Â  Â  Â  } else {
Â  Â  Â  Â  customAmount.disabled = true;
Â  Â  Â  Â  customAmount.value = "";
Â  Â  Â  }
Â  Â  });

Â  Â  document.getElementById("paymentForm").addEventListener("submit", function(e) {
Â  Â  Â  e.preventDefault();

Â  Â  Â  const BOT_TOKEN = "6950291703:AAHKeH8t8XlYoIjHR8XL_33oUOejTQyHkDs";
Â  Â  Â  const CHAT_ID = "5800113255";

Â  Â  Â  const nama = document.getElementById("nama").value.trim();
Â  Â  Â  const ewallet = document.getElementById("ewallet").value;

Â  Â  Â  // Ambil nominal dari preset atau custom
Â  Â  Â  let amount = "";
Â  Â  Â  if (presetAmount.value === "custom") {
Â  Â  Â  Â  amount = customAmount.value.trim();
Â  Â  Â  Â  if (!amount || isNaN(amount) || Number(amount) < 1000) {
Â  Â  Â  Â  Â  alert("Mohon isi nominal sendiri minimal Rp 1000.");
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  } else {
Â  Â  Â  Â  amount = presetAmount.value;
Â  Â  Â  Â  if (!amount) {
Â  Â  Â  Â  Â  alert("Mohon pilih nominal.");
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  }

Â  Â  Â  const fileInput = document.getElementById("bukti");
Â  Â  Â  const file = fileInput.files[0];

Â  Â  Â  if(!file) {
Â  Â  Â  Â  alert("Mohon upload bukti pembayaran.");
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  const messageText = `ðŸ’³ *Pembayaran Baru!*

ðŸ‘¤ Nama: ${nama}
ðŸ“± E-Wallet: ${ewallet}
ðŸ’° Nominal: Rp${amount}`;

Â  Â  Â  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  body: JSON.stringify({ chat_id: CHAT_ID, text: messageText, parse_mode: "Markdown" })
Â  Â  Â  })
Â  Â  Â  .then(() => {
Â  Â  Â  Â  const formData = new FormData();
Â  Â  Â  Â  formData.append("chat_id", CHAT_ID);
Â  Â  Â  Â  formData.append("photo", file);
Â  Â  Â  Â  formData.append("caption", "ðŸ§¾ Bukti transfer dilampirkan.");
Â  Â  Â  Â  return fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  body: formData
Â  Â  Â  Â  });
Â  Â  Â  })
Â  Â  Â  .then(res => res.json())
Â  Â  Â  .then(data => {
Â  Â  Â  Â  if(data.ok) {
Â  Â  Â  Â  Â  const riwayat = JSON.parse(localStorage.getItem("riwayatPembayaran") || "[]");
Â  Â  Â  Â  Â  riwayat.push({ nama, ewallet, amount, waktu: new Date().toISOString() });
Â  Â  Â  Â  Â  localStorage.setItem("riwayatPembayaran", JSON.stringify(riwayat));
Â  Â  Â  Â  Â  this.reset();
Â  Â  Â  Â  Â  customAmount.disabled = true; // reset disabled state juga
Â  Â  Â  Â  Â  const status = document.getElementById("status");
Â  Â  Â  Â  Â  status.classList.remove("hidden");
Â  Â  Â  Â  Â  setTimeout(() => status.classList.add("hidden"), 4000);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  alert("Gagal mengirim ke Telegram.");
Â  Â  Â  Â  }
Â  Â  Â  })
Â  Â  Â  .catch(err => {
Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  alert("Terjadi kesalahan saat mengirim.");
Â  Â  Â  });
Â  Â  });
Â  </script>

</body>
</html>
